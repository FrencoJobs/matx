!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Matx=n()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,n){if(f(t)&&f(n)&&t.length==n.length){for(var u=[],r=0;r<t.length;r++)u.push(t[r]==n[r]);return u.reduce(function(t,n){return t==n})}return!1}function o(t,n){return null!==t&&null!==n&&(0!==t&&0!==n)}function f(t){return null!==t&&"object"===n(t)}function u(t){return!isNaN(t)&&"number"==typeof t}function e(t){return!(!t.hasOwnProperty("output")||!t.hasOwnProperty("size"))}function r(t){return!!(e(t)&&1==t.size[0]||1==t.size[1])}function c(t){return Math.max.apply(null,t)}function s(t){return Math.min.apply(null,t)}function p(t){return[].concat.apply([],t)}function a(t){return t.reverse()}function l(t){return t.size[0]===t.size[1]}function z(t,n){if(o(t,n)&&f(t)&&f(n)&&t.length==n.reduce(function(t,n){return t*n})){for(var u=[],r=0;r<n[0];r++)u.push(t.splice(0,n[1]));return{output:u.splice(0,u.length),size:n}}return!1}function h(r){if(f(r)){var t=function(){for(var u=[],t=function(n){r.output.forEach(function(t){u.push(t[n])})},n=0;n<r.size[1];n++)t(n);return{v:z(u.splice(0,u.length),a(r.size))}}();if("object"===n(t))return t.v}return!1}function v(t,n){if(o(t.output,t.size)&&f(t)&&l(t)&&f(n)){var u=JSON.parse(JSON.stringify(t.output));u.splice(n[0],1);for(var r=0;r<u.length;r++)u[r].splice(n[1],1);var e=[t.size[0]-1,t.size[0]-1];return z(p(u.splice(0,u.length)),e)}return!1}function y(t){if(o(t.output,t.size)&&f(t)&&l(t)){var n=0;if(1==t.size[0])return p(t.output)[0];for(var u=0;u<t.size[0];u++)n+=t.output[0][u]*y(v(t,[0,u]))*Math.pow(-1,u);return n}return!1}function g(t){if(o(t.output,t.size)&&f(t)&&l(t)){for(var n=[],u=0;u<t.size[0];u++)for(var r=0;r<t.size[0];r++)n.push(y(v(t,[u,r])));return z(n,t.size)}return!1}function d(t,n){if(t=p(t),n=p(n),t.length!=n.length)return!1;for(var u=[],r=0;r<t.length;r++)u.push(t[r]*n[r]);return u.splice(0,u.length).reduce(function(t,n){return t+n})}function m(t,n){if(isNaN(t))return!1;for(var u=p(n.output),r=[],e=0;e<u.length;e++)r.push(t*u[e]);return z(r,n.size)}function b(t,n){return u(t)&&e(n)?m(t,n):u(n)&&e(t)?m(n,t):!(!e(t)||!e(n))&&function(t,n){var u;if(i(t.size,a(n.size))){u=[t.size[0],n.size[1]];for(var r=[],e=0;e<n.size[1];e++)for(var o=0;o<t.size[0];o++)r.push(d(t.output[e],h(n).output[o]));return z(r.splice(0,r.length),u)}return!1}(t,n)}function M(t){if(o(t.output,t.size)&&f(t)&&l(t)){var n=[];return t.output.forEach(function(t){n.push(s(t))}),n}return!1}function x(t){if(o(t.output,t.size)&&f(t)&&l(t)){var n=[];return h(t).output.forEach(function(t){n.push(c(t))}),n}return!1}function S(t){return s(x(t))}function N(t){return c(M(t))}function w(t,n){if(!o(1,n))return[];for(var u=[t];2*u.length<=n;)u=u.concat(u);return u.length<n&&(u=u.concat(u.slice(0,n-u.length))),u}return{create:z,transpose:h,trace:function(t){if(o(t.output,t.size)&&f(t)&&l(t)){for(var n=[],u=0;u<t.size[0];u++)n.push(t.output[u][u]);return n.splice(0,n.length).reduce(function(t,n){return t+n})}return!1},cofactor:v,det:y,minor:g,inverse:function(t){if(o(t.output,t.size)&&f(t)&&l(t)){var n=function(t){for(var n=0;n<t.size[0];n++)for(var u=0;u<t.size[1];u++)(n%2==0&&u%2!=0||n%2!=0&&u%2==0)&&(t.output[n][u]*=-1);return t}(h(g(t)));return b(1/y(t),n)}return!1},rowMinima:M,columnMaxima:x,minMax:S,maxMin:N,saddlePoint:function(t){return S(t)===N(t)&&S(t)},eye:function(t){for(var n=z(w(0,t*t),[t,t]),u=0;u<t;u++)n.output[u][u]=1;return n},zero:function(t){return z(w(0,t*t),[t,t])},add:function(t,n){if(i(t.size,n.size)){for(var u=p(t.output),r=p(n.output),e=[],o=0;o<u.length;o++)e.push(u[o]+r[o]);return z(e,n.size)}return!1},subtract:function(t,n){if(i(t.size,n.size)){for(var u=p(t.output),r=p(n.output),e=[],o=0;o<u.length;o++)e.push(u[o]-r[o]);return z(e,n.size)}return!1},multiply:b,pow:function(t,n){for(var u=1,r=0;r<n;r++)u=b(u,t);return u},apply:function(t,n){if(e(t)){for(var u=0;u<t.size[0];u++)for(var r=0;r<t.size[1];r++)t.output[u][r]=n(t.output[u][r]);return t}},rvec:function(t){return{output:[t],size:[1,t.length]}},cvec:function(t){return{output:t.map(function(t){return[t]}),size:[t.length,1]}},dotProduct:function(t,n){return!(!r(t)||!r(n)||t.size[0]!=n.size[0])&&d(h(t).output,n.output)},dyadicProduct:function(t,n){return!(!r(t)||!r(n)||t.size[0]!=n.size[0])&&d(t.output,h(n).output)}}});
